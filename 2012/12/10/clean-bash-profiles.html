<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta content='IE=edge;chrome=1' http-equiv='X-UA-Compatible'>
    <link href="http://fonts.googleapis.com/css?family=Lato:300|Libre+Baskerville" rel="stylesheet" type="text/css" />
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
    <link href="/stylesheets/blog.css" rel="stylesheet" type="text/css" />
  </head>
  <body>
    <header m-fixed>
      <h1>
        <a href='/' m-no-underline>Days of the Condor</a>
      </h1>
      <div class='blog-information' m-top-right>
        <a class='blog-information--projects' href='https://github.com/mdiebolt'>Projects</a>
        <a class='blog-information--about' href='http://diebo.lt'>About</a>
        <div class='blog-information--recent-article-navigation'>
          <div class='blog-information--top-bar'></div>
          <div class='blog-information--middle-bar'></div>
          <div class='blog-information--bottom-bar'></div>
        </div>
      </div>
    </header>
    <div class='blog-page'>
      <div class='blog-page--container'>
        <div class='blog-page--post'>
          <h2 class='title'>
            <a href="/2012/12/10/clean-bash-profiles.html">Clean bash profiles</a>
          </h2>
          <div class='blog-date' m-small>Dec 10, 2012</div>
          <div class='blog-date' m-fixed='' m-left=''>
            <div class='blog-date--month'>DEC</div>
            <div class='blog-date--day' m-bold>10</div>
            <div class='blog-date--year'>2012</div>
          </div>
        </div>
        <p>Lately I&rsquo;ve been more interested in writing Bash. However, as cool as Bash is for being able to pipe data all over the place, it has a really hard to read syntax. This makes understanding people&rsquo;s 1000 line long Bash file tedious.</p>
        
        <p>The more utility functions, aliases, and slight tweaks I add to my profile, the longer I have to spend each time I come back to it. I recently split out each of the sections into their own files to fix this.</p>
        
        <p>My new profile is much shorter and is very clear.</p>
        <pre class="highlight shell"><code><span class="c"># export common color escape sequences</span>&#x000A;<span class="nb">source</span> ~/Dropbox/dotfiles/colors&#x000A;&#x000A;<span class="c"># source utility functions</span>&#x000A;<span class="k">for function in</span> <span class="sb">`</span>find ~/Dropbox/dotfiles/bin/sh -type f<span class="sb">`</span>&#x000A;<span class="k">do&#x000A;  </span><span class="nb">source</span> <span class="nv">$function</span>&#x000A;<span class="k">done</span>&#x000A;&#x000A;<span class="c"># aliases</span>&#x000A;<span class="nb">source</span> ~/Dropbox/dotfiles/aliases&#x000A;&#x000A;<span class="c"># z script</span>&#x000A;<span class="nb">source</span> ~/z/z.sh&#x000A;&#x000A;<span class="c"># system PATH</span>&#x000A;<span class="nb">source</span> ~/Dropbox/dotfiles/paths&#x000A;&#x000A;<span class="nb">export </span><span class="nv">EDITOR</span><span class="o">=</span>subl&#x000A;&#x000A;<span class="nb">eval</span> <span class="s2">"</span><span class="k">$(</span>rbenv init -<span class="k">)</span><span class="s2">"</span>&#x000A;&#x000A;<span class="nv">computer_symbol</span><span class="o">=</span><span class="s2">"âš¡"</span>&#x000A;<span class="nv">symbol_formatting</span><span class="o">=</span><span class="s2">"</span><span class="nv">$reset</span><span class="se">\n</span><span class="nv">$computer_symbol</span><span class="s2"> "</span>&#x000A;&#x000A;<span class="nv">PS1</span><span class="o">=</span><span class="s2">"</span><span class="se">\n\[\`</span><span class="s2">if [[ </span><span class="se">\$</span><span class="s2">? = "</span>0<span class="s2">" ]]; then echo '</span><span class="se">\e</span><span class="s2">[32m</span><span class="se">\h\e</span><span class="s2">[0m'; else echo '</span><span class="se">\e</span><span class="s2">[31m</span><span class="se">\h\e</span><span class="s2">[0m' ; fi</span><span class="se">\`\]</span><span class="s2">:</span><span class="se">\w</span><span class="nv">$yellow</span><span class="s2">"</span><span class="s1">'`__git_ps1`'</span><span class="s2">"</span><span class="nv">$symbol_formatting</span><span class="s2">"</span>&#x000A;</code></pre>
        
        <p>I can never remember the color escape sequences, so the first thing I do is <code>source</code> a file that exports common colors for easy use.</p>
        <pre class="highlight shell"><code><span class="nb">export </span><span class="nv">red</span><span class="o">=</span><span class="s2">"</span><span class="se">\0</span><span class="s2">33[31m"</span>&#x000A;<span class="nb">export </span><span class="nv">yellow</span><span class="o">=</span><span class="s2">"</span><span class="se">\0</span><span class="s2">33[33m"</span>&#x000A;<span class="nb">export </span><span class="nv">green</span><span class="o">=</span><span class="s2">"</span><span class="se">\0</span><span class="s2">33[32m"</span>&#x000A;<span class="nb">export </span><span class="nv">blue</span><span class="o">=</span><span class="s2">"</span><span class="se">\0</span><span class="s2">33[34m"</span>&#x000A;<span class="nb">export </span><span class="nv">purple</span><span class="o">=</span><span class="s2">"</span><span class="se">\0</span><span class="s2">33[35m"</span>&#x000A;<span class="nb">export </span><span class="nv">cyan</span><span class="o">=</span><span class="s2">"</span><span class="se">\0</span><span class="s2">33[36m"</span>&#x000A;<span class="nb">export </span><span class="nv">reset</span><span class="o">=</span><span class="s2">"</span><span class="se">\0</span><span class="s2">33[0m"</span>&#x000A;</code></pre>
        
        <p>Next, I make sure that I have access to all the utility functions I&rsquo;ve been writing by sourcing each of them from a scripts directory.</p>
        
        <p>I noticed that my aliases were getting a bit out of hand and were taking up a large part of my profile, so I pulled them into a file too.</p>
        
        <p>This next one is really useful. <a href="https://github.com/rupa/z">z script</a> is a Bash utility that Paul Irish mentioned in a talk. It allows you to <code>cd</code> into a directory by fuzzy matching directories in your recent bash history. For example, if you always <code>cd</code> into <code>~/matt/some/really/long/project/called/rainbow-unicorns</code>, you could type <code>z uni</code> and z script would work its magic and take you there.</p>
        
        <p>The next part is a matter of personal taste. I prefer using vertical space to horizontal, so I split my <code>PATH</code> variable assignment into another file. The old one used to have a bunch of junk all in one line.</p>
        <pre class="highlight shell"><code><span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span>/path1:/path2:/more/paths: <span class="c"># etc</span>&#x000A;</code></pre>
        
        <p>Here are how my paths look now.</p>
        <pre class="highlight shell"><code><span class="nv">path_directories</span><span class="o">=(</span>&#x000A;  <span class="s1">'/usr/local/share/npm/bin:'</span>&#x000A;  <span class="s1">'~/.pollev/bin:'</span>&#x000A;  <span class="s1">'~/bin:'</span>&#x000A;  <span class="s1">'/bin:'</span>&#x000A;  <span class="s1">'/sbin:'</span>&#x000A;  <span class="s1">'/usr/local/bin:'</span>&#x000A;  <span class="s1">'/usr/bin:'</span>&#x000A;  <span class="s1">'/usr/local/sbin/:'</span>&#x000A;  <span class="s1">'/usr/sbin:'</span>&#x000A;  <span class="s1">'/opt/local/sbin:'</span>&#x000A;  <span class="s1">'/usr/local/git/bin:'</span>&#x000A;  <span class="s1">'/Applications/MacVim/:'</span>&#x000A;  <span class="s1">'/Users/matt/.redis26/bin:'</span>&#x000A;<span class="o">)</span>&#x000A;&#x000A;<span class="nv">PATH</span><span class="o">=</span><span class="k">$(</span><span class="nb">printf</span> <span class="s2">"%s"</span> <span class="s2">"</span><span class="k">${</span><span class="nv">path_directories</span><span class="p">[@]</span><span class="k">}</span><span class="s2">"</span><span class="k">)</span>&#x000A;&#x000A;<span class="nb">export </span>PATH&#x000A;</code></pre>
        
        <p>More verbose? Yes, but I&rsquo;ll take it for clarity.</p>
        
        <p>The rest isn&rsquo;t too exciting, I assign my <code>EDITOR</code> of choice, configure rbenv, and then work black magic to make my prompt look the way I like.</p>
        
        <p>Overall, splitting my profile into multiple files has been a useful project in learning Bash tricks. The only thing I&rsquo;m not pleased with is how hard it is to understand the <code>PS1</code> code. I&rsquo;d like to pull that logic into a function to clear up the intent of the code but I haven&rsquo;t quite figured out how yet.</p>
        <div class='blog-social-media'>
          <a class='fa fa-3x fa-twitter blog-social-media--twitter' href='https://twitter.com/mdiebolt' m-no-underline></a>
          <a class='fa fa-3x fa-github blog-social-media--github' href='https://github.com/mdiebolt' m-no-underline></a>
        </div>
      </div>
    </div>
    <nav class='blog-previous-posts' m-fixed-right>
      <div class='blog-previous-posts--container'>
        <img class="blog-logo" src="/images/logo.svg" />
        <h2 class='blog-previous-posts--title'>Recent Articles</h2>
        <ul class='blog-previous-posts--list'>
          <li class='blog-previous-posts--article'>
            <a href='/2012/12/16/coffeescript-static-analysis.html'>CoffeeScript static analysis</a>
            <div class='date'>Dec 16, 2012</div>
          </li>
          <li class='blog-previous-posts--article'>
            <a href='/2012/12/10/clean-bash-profiles.html'>Clean bash profiles</a>
            <div class='date'>Dec 10, 2012</div>
          </li>
          <li class='blog-previous-posts--article'>
            <a href='/2011/10/05/Programmatically focus content inside an iFrame.html'>Programmatically focus content inside an iFrame</a>
            <div class='date'>Oct  5, 2011</div>
          </li>
          <li class='blog-previous-posts--article'>
            <a href='/2011/09/20/jQuery-UI-Draggable-stop-drag-programmatically.html'>jQuery UI Draggable stop drag programmatically</a>
            <div class='date'>Sep 20, 2011</div>
          </li>
          <li class='blog-previous-posts--article'>
            <a href='/2011/09/15/Arrays-and-jQuery-data-attributes.html'>Arrays and jQuery data attributes</a>
            <div class='date'>Sep 15, 2011</div>
          </li>
          <li class='blog-previous-posts--article'>
            <a href='/2011/03/17/OS-X-dock-in-css.html'>OS X dock in css</a>
            <div class='date'>Mar 17, 2011</div>
          </li>
          <li class='blog-previous-posts--article'>
            <a href='/2011/03/14/glass.sass.html'>glass.sass</a>
            <div class='date'>Mar 14, 2011</div>
          </li>
          <li class='blog-previous-posts--article'>
            <a href='/2010/12/08/Snake-html.html'>Snake</a>
            <div class='date'>Dec  8, 2010</div>
          </li>
          <li class='blog-previous-posts--article'>
            <a href='/2010/10/11/Contrasaurus-launched.html'>Contrasaurus launched</a>
            <div class='date'>Oct 11, 2010</div>
          </li>
          <li class='blog-previous-posts--article'>
            <a href='/2010/08/31/Contrasaurus.html'>Contrasaurus</a>
            <div class='date'>Aug 31, 2010</div>
          </li>
        </ul>
      </div>
    </nav>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      
      ga('create', 'UA-20149612-1', 'auto');
      ga('send', 'pageview');
    </script>
    <script>
      var nav = document.querySelector(".blog-information--recent-article-navigation")
      nav.addEventListener("click", function() {
        if (document.body.hasAttribute("s-slide-out")) {
          document.body.removeAttribute("s-slide-out")
        } else {
          document.body.setAttribute("s-slide-out", "")
        }
      })
      
      window.addEventListener("resize", function() {
        if (window.innerWidth > 640) {
          document.body.removeAttribute("s-slide-out")
        }
      })
    </script>
  </body>
</html>
