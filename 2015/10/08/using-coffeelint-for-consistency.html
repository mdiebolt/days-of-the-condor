<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta content='IE=edge;chrome=1' http-equiv='X-UA-Compatible'>
    <title>Days of the Condor</title>
    <link href="http://fonts.googleapis.com/css?family=Lato:300|Libre+Baskerville" rel="stylesheet" type="text/css" />
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
    <link href="/stylesheets/blog.css" rel="stylesheet" type="text/css" />
    <link href="/images/favicon.png" rel="icon" type="image/png" />
  </head>
  <body><header m-fixed>
      <h1>
        <a href='/' m-no-underline>Days of the Condor</a>
      </h1>
      <div class='blog-information' m-top-right>
        <a class='blog-information--projects' href='https://github.com/mdiebolt'>Projects</a>
        <a class='blog-information--about' href='http://diebo.lt'>About</a>
        <div class='blog-information--recent-article-navigation'>
          <div class='blog-information--top-bar'></div>
          <div class='blog-information--middle-bar'></div>
          <div class='blog-information--bottom-bar'></div>
        </div>
      </div>
    </header><div class='blog-page'>
      <div class='blog-page--container'>
        <div class='blog-page--post'>
          <h2 class='title'>
            <a href="/2015/10/08/using-coffeelint-for-consistency.html">Using CoffeeLint for consistent code</a>
          </h2>
          <div class='blog-date' m-small>Oct  8, 2015</div>
          <div class='blog-date' m-fixed='' m-left=''>
            <div class='blog-date--month'>OCT</div>
            <div class='blog-date--day' m-bold> 8</div>
            <div class='blog-date--year'>2015</div>
          </div>
        </div>
        <p>As I write more CoffeeScript on large teams, I want to be able to open a file and understand code style with little cognitive overhead. Fighting with engineers over personal opinions about writing code is never worth the time. It&rsquo;s a job for robots.</p>
        
        <p><a href="http://www.coffeelint.org/">CoffeeLint</a> is a tool that helps enforce code conventions. You specify a set of rules and let CoffeeLint blow up CI if things aren&rsquo;t to your team&rsquo;s collective stylistic taste.</p>
        
        <p>The way we resolve differences of opinion on my team is that if you don&rsquo;t like a certain style of writing code, be the first to disallow it by turning on a relevant CoffeeLint rule and updating all the code to be in compliance. If there isn&rsquo;t an existing CoffeeLint rule, author your own plugin. If someone is opinionated enough to follow through with these steps, they win the war.</p>
        
        <h2>Set up</h2>
        
        <p><code>npm install coffeelint --save-dev</code></p>
        
        <p>Specify your favorite rules in <code>coffeelint.json</code>. GitHub has made their <a href="https://github.com/styleguide/javascript">preferences</a> publicly available.</p>
        
        <p>Lint your scripts with</p>
        <pre class="highlight shell"><code>./node_modules/.bin/coffeelint -q &lt;source_directory&gt;&#x000A;</code></pre>
        
        <p>and fix anything that&rsquo;s out of compliance. <code>-q</code> skips output for rules marked at the &ldquo;warning&rdquo; level.</p>
        
        <p>Hook it up to CI so you donâ€™t have to be the jerk who tells someone when they&rsquo;ve broken code style. Most CI services make this easy to do.</p>
        
        <h2>Sample configuration with Bamboo</h2>
        
        <p><img alt="Sample CI config" src="/2015/10/08/using-coffeelint-for-consistency/code_style_ci_config.png" /></p>
        
        <p>In this example the referenced rake task looks like this</p>
        <pre class="highlight ruby"><code><span class="n">task</span> <span class="ss">:code_style</span> <span class="k">do</span>&#x000A;  <span class="n">sh</span> <span class="sx">%[./node_modules/.bin/coffeelint -q source/javascripts]</span>&#x000A;<span class="k">end</span>&#x000A;</code></pre>
        
        <p>Now any time CI runs through your build tasks it&rsquo;ll break if someone has introduced code that doesn&rsquo;t match the specified style. I recommend having this task run before your test suite because it&rsquo;s very fast and easy to fix.</p>
        
        <p>Go ahead and delete that code conventions document you&rsquo;ve been working on and look forward to a bright future where you don&rsquo;t have to nag people with GitHub comments about their code style.</p>
        <div class='blog-social-media'>
          <a class='fa fa-3x fa-twitter blog-social-media--twitter' href='https://twitter.com/mdiebolt' m-no-underline></a>
          <a class='fa fa-3x fa-github blog-social-media--github' href='https://github.com/mdiebolt' m-no-underline></a>
        </div>
      </div>
    </div><nav class='blog-previous-posts' m-fixed-right>
      <div class='blog-previous-posts--container'>
        <img class="blog-logo" src="/images/logo.svg" />
        <h2 class='blog-previous-posts--title'>Recent Articles</h2>
        <ul class='blog-previous-posts--list'>
          <li class='blog-previous-posts--article'>
            <a href='/2015/10/08/using-coffeelint-for-consistency.html'>Using CoffeeLint for consistent code</a>
            <div class='date'>Oct  8, 2015</div>
          </li>
          <li class='blog-previous-posts--article'>
            <a href='/2015/10/04/How-to-build-a-living-styleguide.html'>How to build a living styleguide</a>
            <div class='date'>Oct  4, 2015</div>
          </li>
          <li class='blog-previous-posts--article'>
            <a href='/2015/09/30/dead-simple-github-page-publishing.html'>Dead simple GitHub Page publishing</a>
            <div class='date'>Sep 30, 2015</div>
          </li>
          <li class='blog-previous-posts--article'>
            <a href='/2012/12/16/coffeescript-static-analysis.html'>CoffeeScript static analysis</a>
            <div class='date'>Dec 16, 2012</div>
          </li>
          <li class='blog-previous-posts--article'>
            <a href='/2012/12/10/clean-bash-profiles.html'>Clean bash profiles</a>
            <div class='date'>Dec 10, 2012</div>
          </li>
          <li class='blog-previous-posts--article'>
            <a href='/2011/10/05/Programmatically focus content inside an iFrame.html'>Programmatically focus content inside an iFrame</a>
            <div class='date'>Oct  5, 2011</div>
          </li>
          <li class='blog-previous-posts--article'>
            <a href='/2011/09/20/jQuery-UI-Draggable-stop-drag-programmatically.html'>jQuery UI Draggable stop drag programmatically</a>
            <div class='date'>Sep 20, 2011</div>
          </li>
          <li class='blog-previous-posts--article'>
            <a href='/2011/09/15/Arrays-and-jQuery-data-attributes.html'>Arrays and jQuery data attributes</a>
            <div class='date'>Sep 15, 2011</div>
          </li>
          <li class='blog-previous-posts--article'>
            <a href='/2011/03/17/OS-X-dock-in-css.html'>OS X dock in css</a>
            <div class='date'>Mar 17, 2011</div>
          </li>
          <li class='blog-previous-posts--article'>
            <a href='/2011/03/14/glass.sass.html'>glass.sass</a>
            <div class='date'>Mar 14, 2011</div>
          </li>
        </ul>
      </div>
    </nav>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      
      ga('create', 'UA-20149612-1', 'auto');
      ga('send', 'pageview');
    </script>
    <script src="/javascripts/site.js" type="text/javascript"></script>
  </body>
</html>
